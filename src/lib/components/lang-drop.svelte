<script>
	import { Button, Dropdown, DropdownItem } from 'flowbite-svelte';
	import { ChevronDownOutline, SunOutline, MoonOutline } from 'flowbite-svelte-icons';
	import { currentLanguage } from '$lib/stores';
	const languageLabels = {
		ko: 'ðŸ‡°ðŸ‡· í•œêµ­ì–´',
		ja: 'ðŸ‡¯ðŸ‡µ æ—¥æœ¬èªž',
		en: 'ðŸ‡ºðŸ‡¸ English',
		zh: 'ðŸ‡¨ðŸ‡³ ä¸­æ–‡'
	};

	let dropdownOpen = false;
	let isOpen = false;

	// TODO; í•´ë‹¹ í•¨ìˆ˜ê°€ í˜¸ì¶œ ë  ë•Œë§ˆë‹¤ db ë¡œë¶€í„° ë°ì´í„° ìƒˆë¡­ê²Œ ë°›ì•„ì™€ì„œ ì ìš©ì‹œì¼œì•¼í•¨.
	// ë°˜ì‘í˜• ë³€ìˆ˜ ì“°ë©´ ë  ë“¯?
	const handleLanguageChange = (lang) => {
		console.log($currentLanguage);
		currentLanguage.set(lang);
		dropdownOpen = false;
	};
</script>

<details class="dropdown" bind:open={isOpen}>
	<summary class="btn w-36">
		{languageLabels[$currentLanguage]}
		<ChevronDownOutline class="ms-2 h-6 w-6" />
	</summary>
	<ul class="menu dropdown-content z-[1] w-32 rounded-box bg-base-100 p-2 shadow">
		{#each Object.entries(languageLabels) as [lang, label]}
			<li>
				<button
					on:click={() => {
						handleLanguageChange(lang);
						isOpen = false;
					}}
				>
					{label}
				</button>
			</li>
		{/each}
	</ul>
</details>
